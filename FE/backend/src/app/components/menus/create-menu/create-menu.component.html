<!-- Container-fluid starts-->
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <div class="card">
                <div class="card-header">
                    <h5>Sub 
                        Categories Lists</h5>
                </div>
                <div class="card-body">
                    <div class="custom-datatable">
                        <button class="btn btn-primary mr-1 mb-3" style="float: right;" (click)="open(content)">Create</button>
                        <div class="clearfix"></div>
                        <nz-table #table [nzData]="searchedSubcategories" nzTableLayout="fixed">
                            <thead>
                              <tr>
                                  <th nzWidth="10%">Category</th>
                                  <th nzWidth="20%" style="display: flex;
                                  justify-content: space-between;">Name
                                    <nz-filter-trigger [(nzVisible)]="visible" [nzActive]="searchValue.length > 0" [nzDropdownMenu]="menu">
                                      <i nz-icon nzType="search"></i>
                                    </nz-filter-trigger>
                                  </th>
                                  <th nzWidth="20%">Title</th>
                                  <th nzWidth="50%">Description</th>
                                  <th nzWidth="10%">Products</th>
                                  <th nzWidth="10%">Action</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="let data of table.data">
                                    <ng-container>
                                      <td nzWidth="10%">{{ data.category_name }}</td>
                                        <td nzWidth="20%">{{ data.name }}</td>
                                        <td nzWidth="20%">{{ data.title }}</td>
                                        <td nzWidth="50%">{{ data.description }}</td>
                                        <td nzWidth="10%">{{ data.n_products }}</td>
                                        <td nzWidth="10%">
                                          <a (click)="onEdit(content, data.id)"><i nz-icon nzType="edit" style="color: black; font-size: large;" nzTheme="outline"></i></a>
                                          <i style="color: white;">OK</i>
                                            <a
                                              nz-popconfirm
                                              nzPopconfirmTitle="Sure to delete?"
                                              (nzOnConfirm)="onDelete(data.id)"
                                            >
                                            <i nz-icon nzType="delete" style="color: black; font-size: large;" nzTheme="outline"></i></a
                                            >
                                        </td>
                                      </ng-container>
                                </tr>
                              </tbody>
                        </nz-table>
                        <nz-dropdown-menu #menu="nzDropdownMenu">
                          <div class="ant-table-filter-dropdown">
                            <div class="search-box custom">
                              <input type="text" nz-input placeholder="Search name" [(ngModel)]="searchValue" />
                              <button nz-button nzSize="small" (click)="search()" class="search-button btn-primary">Search</button>
                              <button nz-button nzSize="small" (click)="reset()">Reset</button>
                            </div>
                          </div>
                        </nz-dropdown-menu>
                    </div>
                </div>
            </div>
        </div>

        <ng-template #content let-modal>
          <div class="modal-header">
              <h5 class="modal-title f-w-600" id="exampleModalLabel">Add Sub Category</h5>
              <button type="button" class="close" aria-label="Close"
                  (click)="modal.dismiss('Cross click')">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
              <form class="needs-validation" [formGroup]="subcategoryForm">
                  <div class="form">
                    <div class="form-group" *ngIf="!isEdit">
                      <label for="validationCustom01" class="mb-1">Category :</label>
                      <select
                        class="custom-select"
                        required=""
                        formControlName="id_category"
                      >
                        <option value="">--Select--</option>
                        <option *ngFor="let data of categories" [value]="data.id">
                          {{ data.name }}
                        </option>
                      </select>
                    </div>
                      <div class="form-group">
                          <label for="validationCustom01" class="mb-1">Name :</label>
                          <input class="form-control" id="validationCustom01" type="text" formControlName="name">
                      </div>
                      <div class="form-group">
                          <label for="validationCustom02" class="mb-1">Title :</label>
                          <input class="form-control" id="validationCustom02" type="text" formControlName="title">
                      </div>
                      <div class="form-group">
                          <label for="validationCustom01" class="mb-1">Description :</label>
                          <textarea class="form-control text-area" id="validationCustom01" type="text" formControlName="description"></textarea>
                      </div>
                  </div>
              </form>
          </div>
          <div class="modal-footer">
              <button *ngIf="!isEdit" type="button" class="btn btn-primary" (click)="onCreate()">Save</button>
              <button *ngIf="isEdit" type="button" class="btn btn-primary" (click)="onUpdate()">Save</button>
              <button class="btn btn-secondary" type="button" data-dismiss="modal"
                  (click)="modal.dismiss('Cross click')">Close</button>
          </div>
      </ng-template>
    </div>
</div>